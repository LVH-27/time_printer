---
- hosts: clock
  name: fetch and run time_printer
  remote_user: <username> 

  tasks:
  - name: ensure git is installed
    apt:
      name: git
      state: present
    become: true

  - name: pull any changes to time_printer from git
    git:
      repo: https://github.com/LVH-27/time_printer
      dest: ~/time_printer
      version: python

  - name: run time_printer to log the current time
    shell:
      chdir: ~/time_printer
      cmd: python time_printer.py >> time_printer.log

  - name: tail the log file to check if everything went as expected
    shell:
      cmd: cat ~/time_printer/time_printer.log
    register: result

  - name: output
    debug:
      var: result.stdout_lines
